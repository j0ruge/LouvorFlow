generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DB_URL")
}

model Artistas {
  id         String             @id @default(uuid()) @db.Uuid
  nome       String             @unique(map: "artistas_nome_unico")
  created_at DateTime           @default(now()) @db.Timestamp(6)
  updated_at DateTime           @updatedAt @db.Timestamp(6)
  musicas    Artistas_Musicas[]

  @@map("artistas")
}

model Artistas_Musicas {
  id                               String   @id @default(uuid()) @db.Uuid
  artista_id                       String   @db.Uuid
  musica_id                        String   @db.Uuid
  bpm                              Int?
  cifras                           String?
  lyrics                           String?
  link_versao                      String?
  created_at                       DateTime @default(now()) @db.Timestamp(6)
  updated_at                       DateTime @updatedAt @db.Timestamp(6)
  artistas_musicas_artista_id_fkey Artistas @relation(fields: [artista_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  artistas_musicas_musica_id_fkey  Musicas  @relation(fields: [musica_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([artista_id, musica_id])
  @@map("artistas_musicas")
}

model Eventos {
  id                          String                @id @default(uuid()) @db.Uuid
  data                        DateTime              @db.Date
  fk_tipo_evento              String                @db.Uuid
  descricao                   String
  created_at                  DateTime              @default(now()) @db.Timestamp(6)
  updated_at                  DateTime              @updatedAt @db.Timestamp(6)
  eventos_fk_tipo_evento_fkey Tipos_Eventos         @relation(fields: [fk_tipo_evento], references: [id], onDelete: Cascade, onUpdate: NoAction)
  Eventos_Musicas             Eventos_Musicas[]
  Eventos_Integrantes         Eventos_Integrantes[]

  @@map("eventos")
}

model Eventos_Musicas {
  id                              String   @id @default(uuid()) @db.Uuid
  evento_id                       String   @db.Uuid
  musicas_id                      String   @db.Uuid
  created_at                      DateTime @default(now()) @db.Timestamp(6)
  updated_at                      DateTime @updatedAt @db.Timestamp(6)
  eventos_musicas_evento_id_fkey  Eventos  @relation(fields: [evento_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  eventos_musicas_musicas_id_fkey Musicas  @relation(fields: [musicas_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([evento_id, musicas_id])
  @@map("eventos_musicas")
}

model Eventos_Integrantes {
  id                                         String      @id @default(uuid()) @db.Uuid
  evento_id                                  String      @db.Uuid
  fk_integrante_id                           String      @map("fk_integrante_id") @db.Uuid
  created_at                                 DateTime    @default(now()) @db.Timestamp(6)
  updated_at                                 DateTime    @updatedAt @db.Timestamp(6)
  eventos_integrantes_evento_id_fkey         Eventos     @relation(fields: [evento_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  eventos_integrantes_fk_integrante_id_fkey  Integrantes @relation(fields: [fk_integrante_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([evento_id, fk_integrante_id])
  @@map("eventos_integrantes")
}

model Funcoes {
  id                  String                @id @default(uuid()) @db.Uuid
  nome                String                @unique(map: "funcoes_nome_unico")
  created_at          DateTime              @default(now()) @db.Timestamp(6)
  updated_at          DateTime              @updatedAt @db.Timestamp(6)
  Musicas_Funcoes     Musicas_Funcoes[]
  Integrantes_Funcoes Integrantes_Funcoes[]

  @@map("funcoes")
}

model Musicas {
  id                         String             @id @default(uuid()) @db.Uuid
  nome                       String
  fk_tonalidade              String?            @db.Uuid
  created_at                 DateTime           @default(now()) @db.Timestamp(6)
  updated_at                 DateTime           @updatedAt @db.Timestamp(6)
  Artistas_Musicas           Artistas_Musicas[]
  Eventos_Musicas            Eventos_Musicas[]
  musicas_fk_tonalidade_fkey Tonalidades?       @relation(fields: [fk_tonalidade], references: [id], onDelete: Cascade, onUpdate: NoAction)
  Musicas_Funcoes            Musicas_Funcoes[]
  Musicas_Categorias         Musicas_Categorias[]

  @@map("musicas")
}

model Musicas_Funcoes {
  id                             String   @id @default(uuid()) @db.Uuid
  musica_id                      String   @db.Uuid
  funcao_id                      String   @db.Uuid
  created_at                     DateTime @default(now()) @db.Timestamp(6)
  updated_at                     DateTime @updatedAt @db.Timestamp(6)
  musicas_funcoes_funcao_id_fkey Funcoes  @relation(fields: [funcao_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  musicas_funcoes_musica_id_fkey Musicas  @relation(fields: [musica_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([musica_id, funcao_id])
  @@map("musicas_funcoes")
}

model Categorias {
  id                 String               @id @default(uuid()) @db.Uuid
  nome               String               @unique(map: "categorias_nome_unico")
  created_at         DateTime             @default(now()) @db.Timestamp(6)
  updated_at         DateTime             @updatedAt @db.Timestamp(6)
  Musicas_Categorias Musicas_Categorias[]

  @@map("categorias")
}

model Musicas_Categorias {
  id                                    String     @id @default(uuid()) @db.Uuid
  musica_id                             String     @db.Uuid
  categoria_id                          String     @db.Uuid
  created_at                            DateTime   @default(now()) @db.Timestamp(6)
  updated_at                            DateTime   @updatedAt @db.Timestamp(6)
  musicas_categorias_musica_id_fkey     Musicas    @relation(fields: [musica_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  musicas_categorias_categoria_id_fkey  Categorias @relation(fields: [categoria_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([musica_id, categoria_id])
  @@map("musicas_categorias")
}

model Integrantes {
  id                  String                @id @default(uuid()) @db.Uuid
  nome                String
  doc_id              String                @unique
  email               String                @unique @db.VarChar(255)
  senha               String                @db.VarChar(255)
  telefone            String?               @db.VarChar(20)
  created_at          DateTime              @default(now()) @db.Timestamp(6)
  updated_at          DateTime              @updatedAt @db.Timestamp(6)
  Eventos_Integrantes Eventos_Integrantes[]
  Integrantes_Funcoes Integrantes_Funcoes[]

  @@map("integrantes")
}

model Integrantes_Funcoes {
  id                                        String      @id @default(uuid()) @db.Uuid
  fk_integrante_id                          String      @map("fk_integrante_id") @db.Uuid
  funcao_id                                 String      @db.Uuid
  created_at                                DateTime    @default(now()) @db.Timestamp(6)
  updated_at                                DateTime    @updatedAt @db.Timestamp(6)
  integrantes_funcoes_funcao_id_fkey        Funcoes     @relation(fields: [funcao_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  integrantes_funcoes_fk_integrante_id_fkey Integrantes @relation(fields: [fk_integrante_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([fk_integrante_id, funcao_id])
  @@map("integrantes_funcoes")
}

model Tipos_Eventos {
  id         String    @id @default(uuid()) @db.Uuid
  nome       String    @unique(map: "tipos_eventos_nome_unico")
  created_at DateTime  @default(now()) @db.Timestamp(6)
  updated_at DateTime  @updatedAt @db.Timestamp(6)
  Eventos    Eventos[]

  @@map("tipos_eventos")
}

model Tonalidades {
  id         String    @id @default(uuid()) @db.Uuid
  tom        String    @unique(map: "tonalidades_tom_unico")
  created_at DateTime  @default(now()) @db.Timestamp(6)
  updated_at DateTime  @updatedAt @db.Timestamp(6)
  Musicas    Musicas[]

  @@map("tonalidades")
}
